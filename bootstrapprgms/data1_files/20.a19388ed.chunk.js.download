(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{I4Wp:function(e,t,n){},IuzP:function(e,t,n){},JhcM:function(e,t,n){},KA4J:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o});var a=n("efbE"),r=["en","es","pt","id","fr","ar","tr","th","vi","de","it","ja","zh-CN","zh-TW","ru","ko","pl","nl","ro","hu","sv","cs","hi","bn","da","fa","tl","fi","iw","ms","no","uk"],c=function localeToGiphyLang(e){switch(e){case"de-DE-formal":return"de";case"zh":return"zh-CN";case"zh-HK":return"zh-TW";case"pt-BR":return"pt"}return r.includes(e)?e:"en"},i=function getTrendingGiphys(e){return a.h.get("/trending",{params:{limit:e,rating:"pg"}})},o=function getSearchGiphys(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).locale;return a.h.get("/search",{params:{limit:t,q:e,lang:c(n),rating:"pg"}})}},MWt3:function(e,t,n){},"PGb/":function(e,t,n){},UXBQ:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return c});var a=n("efbE"),r=function uploadAttachment(e,t){var n=new FormData;return n.append("conversationId",t),n.append("file",e),a.a.post("/attachments",n)},c=function fetchAttachments(e,t){return a.a.get("/attachments",{params:{id:e},cancelToken:t})}},dZmz:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("efbE"),r=n("rAc1"),c=n("l6A5"),i=function urlIdentity(e){return Object(r.a)(e)},o=(Object(c.a)(i,function(e){return a.k.get("/",{params:{url:encodeURI(e)}})}),Object(c.a)(i,function(e){return a.j.get("/",{params:{url:e,iframe:1,omit_script:1,media:1}})}))},fTFZ:function(e,t,n){"use strict";var a=n("nfbA"),r=n("WwEg"),c=n("s8DI"),i=n("nJ3u"),o=n("O94r"),s=n.n(o),l=n("7IKl"),u=n("lE29"),d=n("ERkP"),m=n.n(d),f=n("Tr4L"),b=n("uDfI"),g=(n("I4Wp"),function AgentTypingIndicator(){var e=Object(f.a)().t,t=Object(u.a)().widgetBackgroundAlpha,n=Object(b.c)(function(e){return e.conversations.typingIndicators[e.conversations.activeConversation]||{}}),a=n.isTyping,r=void 0!==a&&a,c=n.userId,i=Object(l.a)(c);return r?m.a.createElement("p",{style:t,className:"agent-typing-indicator"},e("status.agentTyping",{agent:i})):null}),p=n("ZGTz"),v=n("oImb"),O=n("+Kbs"),h=n("908p"),j=n("nQD+"),E=n("HXmn"),y=n("mZ4K"),w=n("P+wr"),A=n("6wvX"),k=n("z24s"),I=n("jITz"),C=n("rAhV"),T=n("6rzO"),N=n("58kB"),L=n("uQkC"),S=n("hNWd"),U=n("+oIK"),B=n("LVcX"),R=n("U505"),F=n("ovDp"),M=n("vwUF"),z=n("0lfv");n("IuzP");n.d(t,"a",function(){return V});var V,_="GIF",P="TEXT",D=function validateMessageText(e){return e&&e.trim().length>0};!function(e){e[e.AVAILABLE=0]="AVAILABLE",e[e.AVAILABLE_BUTTONS=1]="AVAILABLE_BUTTONS",e[e.UNAVAILABLE=2]="UNAVAILABLE",e[e.UNAVAILABLE_BUTTONS=3]="UNAVAILABLE_BUTTONS"}(V||(V={}));t.b=function Composer(e){var t=e.onSubmit,n=e.activeConversationId,o=e.state,l=void 0===o?V.AVAILABLE:o,x=e.disabled,H=void 0!==x&&x,Z=e.chatHidden,G=Object(d.useRef)(null),K=Object(d.useRef)(null),W=Object(d.useRef)(null),J=Object(d.useRef)(null),X=Object(d.useState)(""),q=Object(c.a)(X,2),Q=q[0],Y=q[1],$=Object(d.useState)(!1),ee=Object(c.a)($,2),te=ee[0],ne=ee[1],ae=Object(d.useState)([]),re=Object(c.a)(ae,2),ce=re[0],ie=re[1],oe=Object(k.a)(G),se=Object(k.a)(K),le=Object(k.a)(W),ue=Object(k.a)(J),de=Object(b.c)(function(e){return e.view}),me=de.matchedHours,fe=de.chatOpen,be=Object(b.c)(function(e){return e.conversations.attachments}),ge=Object(b.c)(function(e){return e.session.endUser.id}),pe=Object(b.c)(function(e){return Object(B.a)(!1,["embed","configuration","theme"],e)}).allowEndUserFileUpload,ve=Object(f.a)().t,Oe=Object(A.a)(!0),he=Object(C.a)().markAsRead,je=Object(y.a)(),Ee=Object(u.a)(),ye=Ee.activeColor,we=Ee.widgetBackgroundColor,Ae=Object(N.a)(je).recipient,ke=Object(T.a)({inputRef:G}),Ie=ke.pastedFiles,Ce=ke.clearFiles,Te=Object(I.a)({targetKey:"Enter"}),Ne=Object(L.a)({activeConversationId:n}),Le=Ne.sendTypingStarted,Se=Ne.sendTypingFinished,Ue=Object(w.a)({activeConversation:n,onAttachmentUploadComplete:Object(d.useCallback)(function onAttachmentUploadComplete(e){ie(function(t){return[].concat(Object(r.a)(t),Object(r.a)(e))}),Ce()},[])}),Be=Ue.attachmentState,Re=Ue.uploadAttachments,Fe=Ue.resetAttachmentState,Me=l===V.AVAILABLE||l===V.AVAILABLE_BUTTONS,ze=Object(F.a)({onDrop:Re,disabled:H||!Me||!pe}),Ve=ze.getRootProps,_e=ze.getInputProps,Pe=ze.open,De=D(Q)||ce.length,xe=Be===M.b.PENDING,He=Be===M.b.ERROR||Be===M.b.SIZE_ERROR;var Ze=Object(d.useCallback)(function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P,c=ce?{attachments:ce}:{},i=n?{}:{sentWelcomeMessage:me,sentOfflineHours:!me};Se();var o=r===P?Object(z.n)(e):e;t({message:Object(U.a)(Object(a.a)({message:o,activeConversation:n||null,authorId:ge,attributes:i},c))}),Y(""),ie([]),Fe()},[n,ge,me,t,Fe,Se,ce]);Object(d.useEffect)(function(){pe?Ie.length&&!xe&&Re(Ie):Ce()},[pe,xe,Ce,Ie,Re]),Object(d.useEffect)(function(){Te&&(D(Q)||ce.length)&&Ze(Q,P)},[Te,Q,Ze,ce.length]),Object(d.useEffect)(function(){n&&Y("")},[n]),Object(d.useEffect)(function(){var e=G,t=l===V.AVAILABLE_BUTTONS;return fe&&Me&&!t&&!Z&&e.current&&e.current.focus(),function(){return e.current&&e.current.blur()}},[Z,fe,Me,l]);var Ge=Object(d.useMemo)(function(){return Me?ve("composer.replyToPlaceholder",{name:Ae.name}):ve(l===V.UNAVAILABLE_BUTTONS?"composer.chooseOptionAbove":"composer.replyDisabled")},[Me,Ae.name,l,ve]),Ke=pe&&!!n,We=!De&&!!n,Je=!!De,Xe=Ke||Je||We,qe=H||xe;return m.a.createElement(m.a.Fragment,null,(ce.length||xe||He)&&m.a.createElement("div",{className:"drift-widget-composer--pre-message-attachments"},He&&m.a.createElement("div",{className:"drift-widget-attachment-send-status drift-widget-attachment-send-status--failed"},m.a.createElement("span",{className:"drift-widget-attachment-send-status--text"},ve(Be===M.b.SIZE_ERROR?"attachment.errorSize":"attachment.error")),m.a.createElement(j.a,{onClick:function onClick(){Fe(),Ce()},className:"drift-widget-attachment-send-status--close",disabled:H},m.a.createElement(O.j,{width:10,height:10}))),(ce.length||xe)&&m.a.createElement("ul",{className:"drift-widget-composer-attachment-preview-list"},[].concat(Object(r.a)(ce),Object(r.a)(xe?[{pending:!0}]:[])).map(function(e,t){return m.a.createElement("li",{key:be[e]?be[e].id:"file-upload-loader"},be[e]&&!be.pending&&m.a.createElement(j.a,{"aria-label":"Remove attachment ".concat(t+1),onClick:function onClick(){return function onRemoveUploadedAttachment(e){ie(function(t){return Object(R.a)([e],t)})}(e)},disabled:H},m.a.createElement(O.j,{width:6,height:6})),be[e]&&!be.pending?function resolveAttachmentTypeComponent(e){return e?e.mimeType.includes("image")?m.a.createElement("div",{className:"drift-widget-composer-attachment-preview-list-image-wrapper"},m.a.createElement("img",{alt:e.fileName,src:e.publicUrl})):m.a.createElement("div",{className:"drift-widget-composer-attachment-non-image",title:e.filename},m.a.createElement("strong",null,e.fileName),m.a.createElement(O.k,{width:16,height:16})):null}(be[e]):m.a.createElement(E.a,{size:"small",className:"drift-widget-composer-attachment-loader"}))}))),m.a.createElement("style",null,"\n          .drift-widget-input.keyboard-focused {\n            ".concat(Object(i.d)(we,ye),"\n          }\n\n          .drift-widget-composer-emoji-toggle.keyboard-focused:before {\n            ").concat(Object(i.a)(ye,24,-2),"\n          }\n\n          .drift-widget-composer-actions button.keyboard-focused,\n          .drift-widget-composer-send-button.keyboard-focused {\n            ").concat(Object(i.c)(ye),"\n          }\n        ")),m.a.createElement("div",Object.assign({},Ve({onClick:function onClick(e){return e.stopPropagation()}}),{className:s()("drift-widget-composer--default",{"drift-widget-composer--mobile":Oe})}),pe&&m.a.createElement("input",_e()),m.a.createElement(g,null),m.a.createElement("div",{className:"drift-widget-composer--text-area"},m.a.createElement("pre",null,Me&&Q.length?Q:" "),m.a.createElement("label",{className:"drift-a11y-visually-hidden",htmlFor:"drift-widget-composer-input"},Ge),m.a.createElement("textarea",{className:s()("drift-widget-input",{"keyboard-focused":oe}),ref:G,placeholder:Ge,value:Me?Q:"",onChange:function onTextareaChange(e){Te||Ie.length||(Y(e.target.value),Le())},onFocus:function onComposerFocus(){he(n)},"aria-label":"message composer",maxLength:4096,disabled:H||!Me||!!Ie.length,tabIndex:0,id:"drift-widget-composer-input"}),Me&&!Oe&&m.a.createElement("button",{ref:K,className:s()("drift-widget-composer-emoji-toggle",{"keyboard-focused":se}),onClick:function onEmojiButtonClick(){l!==V.AVAILABLE||H||ne(!te)},disabled:H,"aria-expanded":te,"aria-label":"emojis"},m.a.createElement(S.a,null))),!Oe&&m.a.createElement(p.a,{open:te,onAddEmoji:function onAddEmoji(e){ne(!te),Me&&!H&&(Y(e),G.current&&G.current.focus())},onClickOutside:function onEmojiPickerClickOutside(e){K.current&&K.current.contains(e.target)||ne(!1)}}),Me&&Xe&&m.a.createElement("div",{className:"drift-widget-composer-actions"},Ke&&m.a.createElement("button",{ref:W,className:s()({"keyboard-focused":le}),onClick:Pe,"aria-label":"add an attachment",disabled:H},m.a.createElement(O.a,null)),We&&m.a.createElement(v.a,{onAddGiphy:function onAddGiphy(e){return Ze(e,_)},disabled:H}),Je&&m.a.createElement("button",{className:s()("af drift-widget-composer-send-button",{"drift-widget-composer-send-button--disabled":qe,"keyboard-focused":ue}),"aria-label":"send message",onClick:function onClick(){return Ze(Q,P)},disabled:H||xe,ref:J},m.a.createElement(h.a,{color:"#".concat(ye)})))))}},jKoD:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("efbE"),r=function recordConsent(e,t){return a.e.post("/end_users/".concat(e,"/consent"),{consentId:"has_consent",message:t})}},pgTp:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s}),n.d(t,"d",function(){return l}),n.d(t,"c",function(){return u});var a=n("WwEg"),r=n("efbE"),c=n("JBtm"),i=n.n(c),o=function fetchAgentAvailability(e){var t=e.agentId,n=e.additionalAgents,c=void 0===n?[]:n,o=e.meetingType,s=e.start,l=e.orgMeetingType;return r.n.get("scheduling/".concat(t,"/availability"),{params:{meetingType:o,start:s,additionalAgents:Object(a.a)(c),orgMeetingType:l},paramsSerializer:function paramsSerializer(e){return i.a.stringify(e)}})},s=function fetchCompanyAvailability(e){var t=e.orgMeetingType,n=e.agentIds,a=void 0===n?[]:n;return r.n.get("/scheduling/availability/combined/v2",{params:{orgMeetingType:t,agentIds:a},paramsSerializer:function paramsSerializer(e){return i.a.stringify(e)}})},l=function scheduleMeeting(e){var t=e.endUserTimeZone,n=e.availabilitySlot,a=e.agentId,c=e.meetingType,i=e.meetingSource,o=e.conversationId,s=e.bookedByUserId,l=e.orgMeetingType;return r.n.post("scheduling/".concat(a,"/schedule"),n,{params:{conversationId:o,meetingSource:i,meetingType:c,timeZone:t,bookedByUserId:s,orgMeetingType:l}})},u=function scheduleCompanyMeeting(e){var t=e.availabilitySlot,n=e.availableAgents,a=e.conversationId,c=e.meetingSource,i=e.meetingType,o=e.endUserTimeZone,s=e.bookedByUserId,l=e.orgMeetingType;return r.n.post("/scheduling/schedule/combined",{availabilitySlot:t,availableAgents:n,conversationId:a,meetingSource:c,meetingType:i,endUserTimeZone:o,bookedByUserId:s,orgMeetingType:l})}},"tGI+":function(e,t,n){"use strict";var a=n("NJA7"),r=n("fw6E"),c=n("K7i0"),i=n("+oIK"),o=n("da4L"),s=n("ERkP"),l=n.n(s),u=n("uDfI");t.a=function AgentRequestedOptions(e){var t=e.message,n=t.attributes,s=t.id,d=t.conversationId,m=Object(u.b)(),f=Object(u.c)(function(e){return e.session}).endUser,b=Object(r.a)().conversationHistoryOpen,g=Object(u.c)(function(e){return e.view}).chatOpen,p=Object(o.k)(t)&&g,v=function doSendMessage(e){var n=e.label;return function(){var e=Object(i.a)({message:n,activeConversation:d,authorId:f.id,attributes:{buttonClicked:!0,questionId:t.attributes.questionId}});m(Object(c.m)({message:e}))}};return l.a.createElement("ul",{className:"drift-widget-message-group drift-widget-message-group-type--END_USER drift-bot-buttons--set"},n.buttons.map(function(e,t){return l.a.createElement("li",{className:"drift-widget-button--list-item","aria-posinset":t,key:"bot-button-".concat(s,"-").concat(t)},l.a.createElement(a.a,{onClick:v(e),invertOnHover:!0,forceFocus:0===t&&p,disabled:b,"aria-label":"".concat(e.label," - Click to reply with this message")},e.label))}))}},vkRn:function(e,t,n){"use strict";var a=n("nJ3u"),r=n("O94r"),c=n.n(r),i=n("noex"),o=n("yEsl"),s=n("8pzW"),l=n("fw6E"),u=n("z24s"),d=n("hhdZ"),m=n("rAhV"),f=n("58kB"),b=n("6fy/"),g=n("SsZN"),p=n("K7i0"),v=n("da4L"),O=n("LVcX"),h=n("i9gz"),j=n("ERkP"),E=n.n(j),y=n("uDfI"),w=n("A5mO"),A=(n("JhcM"),function ConversationHistoryListItem(e){var t=e.conversation,n=void 0===t?{}:t,a=Object(l.a)().onToggleConversationHistory,r=Object(j.useRef)(null),A=Object(u.a)(r),k=Object(y.b)(),I=Object(b.a)(),C=Object(j.useMemo)(function(){return Object(O.a)(null,["conversation","id"],n)},[n]),T=Object(d.a)(C),N=Object(j.useMemo)(function(){return Object(O.a)(null,["authorId"],T)},[T]),L=Object(f.a)(N).recipient,S=Object(v.h)(T),U=Object(m.a)().markAsRead;if(Object(h.a)(T))return null;var B=T.createdAt,R=T.attributes,F=void 0===R?{}:R,M=Object(w.a)(B).isAfter(w.a.today())?Object(w.a)(B).unixFmt(s.c):Object(w.a)(B).unixFmt(s.a),z=S?I.name:L.name,V="Conversation with ".concat(L.name).concat(F.preview?" - ".concat(S?"You":"",': "').concat(F.preview,'"'):"",", ").concat(M," - Click to open");return E.a.createElement("li",{className:c()("drift-widget-conversation-list-item",{"keyboard-focused":A})},E.a.createElement("button",{onClick:function toggleConversation(e){return function(){C&&(U(C),a(!1),k(Object(p.n)({conversationId:e})),Object(g.f)(e))}}(n.conversation.id),"aria-label":V,ref:r},S?E.a.createElement(o.a,{size:"SMALL",className:"drift-widget-conversation-list-item-avatar",image:I.avatar}):E.a.createElement(i.a,{size:"SMALL",className:"drift-widget-conversation-list-item-avatar",image:L.avatarUrl,id:N}),E.a.createElement("div",{className:"drift-widget-conversation-list-item-content"},E.a.createElement("h2",null,z),E.a.createElement("span",{className:"drift-widget-conversation-list-item-time"},M),E.a.createElement("p",{className:"drift-widget-conversation-list-item-last-message"},F.preview))))}),k=n("lE29"),I=n("DboL"),C=n("9xv8");n("PGb/"),t.a=function ConversationHistory(){var e=Object(l.a)().conversationHistoryOpen,t=Object(y.c)(function(e){return e.conversations.conversations}),n=Object(j.useMemo)(function(){return Object(C.b)(Object(I.a)(t),"updatedAt")},[t]),r=Object(j.useMemo)(function(){return E.a.createElement("ul",{className:"drift-widget-conversation-history-list"},n.map(function(e){return E.a.createElement(A,{key:e.conversation.id,conversation:e})}))},[n]),i=Object(k.a)().activeColor;return E.a.createElement("div",{className:c()("drift-widget-conversation-history",{"drift-widget-conversation-history--open":e}),"aria-hidden":!e},E.a.createElement("style",null,"\n          .drift-widget-conversation-list-item.keyboard-focused {\n            ".concat(Object(a.c)(i),"\n          }\n        ")),e&&r)}},xyhj:function(e,t,n){"use strict";var a=n("nJ3u"),r=n("O94r"),c=n.n(r),i=n("z24s"),o=n("lE29"),s=n("ERkP"),l=n.n(s),u=n("uDfI"),d=n("PjZB"),m=n("7oto");n("MWt3");t.a=function CtaButton(e){var t=e.ctaUrl,n=e.ctaCopy,r=e.ctaType,f=e.onClick,b=e.ariaHidden,g=Object(o.a)(),p=g.activeColor,v=g.backgroundStyles,O=Object(u.c)(function(e){return e.campaigns.activeCampaign}),h=Object(s.useRef)(null),j=Object(i.a)(h),E=function onCtaClick(e){r===d.a.CHAT_RESPONSE?Object(m.a)({topic:"drift-api:open-chat"}):r===d.a.SCHEDULE_MEETING&&Object(m.a)({topic:"drift-api:schedule-meeting",message:{scheduleMeetingWith:O.attributes.senderId,options:{activeCampaign:O}}}),f&&f(e)};return Object(s.useEffect)(function(){var e=h;return setTimeout(function(){return e.current&&e.current.focus()},50),function(){return e.current&&e.current.blur()}},[]),r===d.a.LINK_TO_URL?l.a.createElement(l.a.Fragment,null,l.a.createElement("style",null,"\n            .drift-widget-announcement-cta-link-wrapper a.keyboard-focused {\n              ".concat(Object(a.d)("FFFFFF",p),"\n            }\n          ")),l.a.createElement("div",{className:"drift-widget-announcement-cta drift-widget-announcement-cta-link-wrapper",hidden:b},l.a.createElement("a",{className:c()("drift-widget-announcement-cta-link",{"keyboard-focused":j&&!b}),href:t,onClick:E,target:"_blank",rel:"noopener noreferrer",ref:h,"aria-describedby":"drift-widget-announcement-cta-description",style:v,"aria-hidden":b},n),l.a.createElement("span",{hidden:!0,id:"drift-widget-announcement-cta-description"},n+"; opens an external site in a new window"))):l.a.createElement(l.a.Fragment,null,l.a.createElement("style",null,"\n          .drift-widget-announcement-cta.keyboard-focused {\n            ".concat(Object(a.d)("FFFFFF",p),"\n          }\n        ")),l.a.createElement("button",{className:c()("drift-widget-announcement-cta",{"keyboard-focused":j}),onClick:E,style:v,ref:h},n))}}}]);